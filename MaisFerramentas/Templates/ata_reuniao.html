<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arrastar e Mudar Posição</title>
    <style>
      /* Estilos CSS para o arrastar e mudar posição */
      .draggable {
        cursor: pointer;
        user-select: none;
      }
      .draggable:hover {
        opacity: 0.7;
      }
    </style>
  </head>
  <body>
    <!-- Divs contendo os elementos A, B e C -->
    <div id="1" class="draggable" draggable="true" ondragstart="drag(event)">
      <span class="material-symbols-outlined drag_indicator">
        drag_indicator
      </span>
      <label for="">Elemento A</label>
      <input type="text" />
    </div>
    <div id="2" class="draggable" draggable="true" ondragstart="drag(event)">
      <span class="material-symbols-outlined drag_indicator">
        drag_indicator
      </span>
      <label for="">Elemento B</label>
      <input type="text" />
    </div>
    <div id="3" class="draggable" draggable="true" ondragstart="drag(event)">
      <span class="material-symbols-outlined drag_indicator">
        drag_indicator
      </span>
      <label for="">Elemento C</label>
      <input type="text" />
    </div>

    <script>
      // Função para iniciar o arrasto
      function drag(event) {
        event.dataTransfer.setData("text/plain", event.target.id);
      }

      // Seleciona todos os elementos com a classe 'draggable'
      const draggableElements = document.querySelectorAll(".draggable");

      // Itera sobre cada elemento draggable
      draggableElements.forEach((elem) => {
        elem.addEventListener("dragover", (event) => {
          event.preventDefault();
        });

        elem.addEventListener("drop", (event) => {
          event.preventDefault();
          const draggedId = event.dataTransfer.getData("text/plain");
          const draggedElement = document.getElementById(draggedId);
          const dropzoneElement = event.target.closest(".draggable");

          if (draggedElement && dropzoneElement) {
            // Verifica a posição do elemento em relação ao dropzoneElement
            const rect = dropzoneElement.getBoundingClientRect();
            const mouseY = event.clientY;
            const isAbove = mouseY < rect.top + rect.height / 2;

            // Insere o elemento na posição adequada
            if (isAbove) {
              dropzoneElement.before(draggedElement);
            } else {
              dropzoneElement.after(draggedElement);
            }

            // Atualiza os IDs de acordo com a nova ordem
            updateIds();
          }
        });
      });

      // Função para atualizar os IDs
      function updateIds() {
        const draggableElements = document.querySelectorAll(".draggable");
        draggableElements.forEach((elem, index) => {
          elem.id = (index + 1).toString();
        });
      }
    </script>
  </body>
</html>
