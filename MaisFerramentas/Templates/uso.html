<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search and Dropdown</title>
    <style>
      .dropdown {
        position: relative;
        display: inline-block;
      }

      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        z-index: 1;
        min-width: 160px;
        padding: 12px;
        overflow-y: auto;
        max-height: 200px;
      }

      .dropdown-content a {
        color: black;
        text-decoration: none;
        display: block;
        cursor: pointer;
      }

      .dropdown-content a:hover {
        background-color: #ddd;
      }

      input.invalid {
        color: red;
      }
    </style>
  </head>
  <body>
    <div class="dropdown">
      <input
        type="text"
        id="searchInput"
        onkeyup="searchNames()"
        placeholder="Search names..."
      />
      <div id="myDropdown" class="dropdown-content"></div>
    </div>

    <script>
      const names = ["Alice", "Bob", "Charlie", "David", "Eve"];

      function searchNames() {
        const input = document.getElementById("searchInput");
        input.style.color = "black";
        const filter = input.value.toLowerCase();
        const dropdown = document.getElementById("myDropdown");
        dropdown.innerHTML = "";
        let invalidName = true;

        names.forEach((name) => {
          if (name.toLowerCase().includes(filter)) {
            input.style.color = "black";
            const nameElement = document.createElement("a");
            nameElement.textContent = name;
            nameElement.onclick = function () {
              input.value = name;
              dropdown.style.display = "none";
            };
            dropdown.appendChild(nameElement);
            invalidName = false;
          }
        });

        if (invalidName && filter !== "") {
          input.style.color = "red";
          const invalidNameElement = document.createElement("a");
          invalidNameElement.textContent = input.value;
          invalidNameElement.style.color = "red";
          invalidNameElement.onclick = function () {
            input.value = this.textContent;
            dropdown.style.display = "none";
          };
          dropdown.appendChild(invalidNameElement);
        }

        if (filter === "") {
          dropdown.style.display = "none";
        } else {
          dropdown.style.display = "block";
        }
      }

      // Fechar dropdown e limpar input quando clicar fora do dropdown
      window.addEventListener("click", function (event) {
        if (!event.target.matches(".dropdown")) {
          document.getElementById("myDropdown").style.display = "none";
          // document.getElementById("searchInput").value = ""; // Limpa o conte√∫do do input
        }
      });
    </script>
  </body>
</html>
